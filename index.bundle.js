"use strict";(self.webpackChunkwebpack_template=self.webpackChunkwebpack_template||[]).push([[826],{864:()=>{const t="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi",e="14KqRvCZ5CTRdsGLguWF",n=document.querySelector(".country-list");let a=[];const s=()=>{const t=document.querySelector(".list-group"),e=document.querySelector(".commentsCounter");t.children.length>0?e.innerHTML=t.children.length:e.innerHTML="0"},o=async n=>{const a=document.querySelector(".list-group");n&&await(async n=>{const a=`${t}/apps/${e}/comments?item_id=${n}`;return(await fetch(a,{method:"GET"})).json()})(n).then((t=>{if(!(t.length>0))throw Error("No comments");{const e=t.map((t=>`<li class="list-group-item d-flex justify-content-between align-items-center">\n              <span>${t.creation_date}</span>\n              <span>${t.username}</span>\n              <span>${t.comment}</span>\n            </li>`));a.innerHTML=e.join(""),s()}})).catch((t=>{const e=`<li class="list-group-item d-flex justify-content-center">${t.message}</li>`;a.innerHTML=e}))};(()=>{const t=document.createElement("section");t.innerHTML='<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">\n  <div class="modal-dialog modal-dialog-scrollable">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n      </div>\n      <div class="modal-body">\n        <section class="text-center">\n          <img id="country-img" src="" alt="modal image">\n          <section>\n            <h3 id="country-title" class="mt-2"></h3>\n            <p class="card-text mb-2">\n              <span class="p-lead">Population: </span> \n              <span class="modal-population"></span>\n            </p>\n            <p class="card-text mb-2">\n              <span class="p-lead">Official Name: </span> \n              <span class="official"></span>\n            </p>\n          </section>\n        </section>\n        <section class="comment-section">\n          <h4 class="d-flex align-items-center gap-2 justify-content-center"><span class="commentsCounter badge bg-secondary rounded-pill"></span><span>Comments</span></h4>\n          <ul class="list-group mt-4"></ul>\n        </section>\n\n        <section class="mt-5">\n          <form>\n            <input type="text" id="name" class="form-control" placeholder="Your name" aria-label="Full Name">\n            <textarea id="insights" type="text" class="form-control" placeholder="Remarks" aria-label="Remarks"></textarea>\n            <button type="button" id=\'add-comment\' class="btn btn-success">Comment</button>\n          </form>\n        </section>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>',document.querySelector("body").appendChild(t)})();const l=(a,l=[])=>{if(a.length){const c=a.map((t=>{const e=l.find((e=>e.item_id===t.name.common.split(" ")[0]?e:null));return{...t,likesCount:e?e.likes:0}}));c.length&&(async a=>{let l="";a.forEach((t=>{const e=t.name.common.split(" ")[0],n=`<div class="col-12 col-sm-6 col-lg-3" data-id=${t.name.common}>\n    <div class="card mx-auto" data-id=${t.name.common}>\n      <div class="card-img" style="background-image: url(${t.flags.svg})"></div>\n      <div class="card-body">\n        <div class="c-header d-flex justify-content-between align-items-center mb-2">\n          <h4 class="card-title mb-0">${t.name.common}</h4>\n          <div class="likes">\n            <a href="javascript:;" type="button" class='add-like' id=${e}>\n              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>\n            </a>\n            <span class="likes-counter">${t.likesCount}</span>\n          </div>\n        </div>\n        <p class="card-text small mb-2">\n          <span class="p-lead">Population: </span>\n          <span class="population">${t.population.toLocaleString("en-US")}</span>\n        </p>\n        <p class="card-text small mb-2">\n          <span class="p-lead">Region: </span> \n          <span class="region">${t.region}</span>\n        </p>\n        <p class="card-text small mb-2">\n          <span class="p-lead">Capital: </span> \n          <span class="capital">${t.capital}</span>\n        </p>\n        <button type="button" class="btn btn-outline-secondary comment-btn" data-bs-toggle="modal" data-bs-target="#exampleModal" id="${t.name.common}">See Details</button>\n      </div>\n    </div>\n  </div>`;l+=n})),n.innerHTML=l,document.querySelector("#country-counter").textContent=n.children.length,document.querySelectorAll(".card").forEach((n=>{n.addEventListener("click",(n=>{if(n.target.classList.contains("comment-btn")){s();const t=n.target.getAttribute("id");document.querySelector(".modal").setAttribute("data-id",t);const e=((t,e)=>e.find((e=>e.name.common===t.trim())))(t,a),l=document.querySelector("#country-img"),c=document.querySelector("#country-title"),i=document.querySelector(".modal-population"),d=document.querySelector(".official");l.setAttribute("src",e.flags.svg),c.innerHTML=e.name.common,i.innerHTML=e.population.toLocaleString("en-US"),d.innerHTML=e.name.official,o(e.name.common)}n.target.parentNode.parentNode.classList.contains("add-like")&&(async n=>(await fetch(`${t}/apps/${e}/likes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:n})})).text())(n.target.parentNode.parentNode.getAttribute("id")).then((()=>{const t=Number(n.target.parentNode.parentNode.nextElementSibling.textContent);n.target.parentNode.parentNode.nextElementSibling.textContent=String(t+1)}))}))}))})(c)}};document.querySelector("#add-comment").addEventListener("click",(()=>{const n=document.getElementById("exampleModal").getAttribute("data-id").trim(),a=document.getElementById("name").value,s=document.getElementById("insights").value;""!==a&&""!==s&&(async n=>(await fetch(`${t}/apps/${e}/comments`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)})).text())({item_id:n,username:a,comment:s}).then((()=>{o(n),document.getElementById("name").value="",document.getElementById("insights").value=""}))})),document.addEventListener("DOMContentLoaded",(async()=>{await(async()=>(await fetch("https://restcountries.com/v3.1/all")).json())().then((n=>(a=n.slice(0,8),(async()=>await fetch(`${t}/apps/${e}/likes`))()))).then((t=>{t.json().then((t=>{l(a,t)})).catch((()=>{l(a,[])}))}))}))}},t=>{t(t.s=864)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI2R0FDQSxNQ0FNQSxFQUNKLHFFQUVJQyxFQUFTLHVCQ0ZmLEVBRm9CQyxTQUFTQyxjQUFjLGlCQ08zQyxJQUFJLEVBQVksR0FHaEIsTUFNTUMsRUFBbUIsS0FDdkIsTUFBTUMsRUFBa0JILFNBQVNDLGNBQWMsZUFDekNHLEVBQVVKLFNBQVNDLGNBQWMsb0JBQ25DRSxFQUFnQkUsU0FBU0MsT0FBUyxFQUNwQ0YsRUFBUUcsVUFBNkJKLEVBQWdCRSxTQ25CbENDLE9EcUJuQkYsRUFBUUcsVUFBWSxHQUN0QixFQUdJQyxFQUFpQkMsTUFBT0MsSUFDNUIsTUFBTUMsRUFBYVgsU0FBU0MsY0FBYyxlQUN0Q1MsUUUxQmVELE9BQU9DLElBQzFCLE1BQU1FLEVBQU0sR0FBR2QsVUFBc0JDLHNCQUEyQlcsSUFHaEUsYUFEdUJHLE1BQU1ELEVBRE4sQ0FBRUUsT0FBUSxTQUVqQkMsTUFBTSxFRnVCZEMsQ0FBYU4sR0FDaEJPLE1BQU1DLElBQ0wsS0FBSUEsRUFBS1osT0FBUyxHQVNoQixNQUFNYSxNQUFNLGVBVE8sQ0FDbkIsTUFBTUMsRUFBT0YsRUFBS0csS0FBS0MsR0FBWSx1R0FDdkJBLEVBQVFDLDZDQUNSRCxFQUFRRSx3Q0FDUkYsRUFBUUEsc0NBRXBCWCxFQUFXSixVQUFZYSxFQUFLSyxLQUFLLElBQ2pDdkIsR0FDRixDQUVBLElBRUR3QixPQUFPQyxJQUNOLE1BQU1QLEVBQU8sNkRBQTZETyxFQUFJQyxlQUM5RWpCLEVBQVdKLFVBQVlhLENBQUksR0FFakMsRUF3RmtCLE1BQ2xCLE1BQU1TLEVBQVU3QixTQUFTOEIsY0FBYyxXQXlDdkNELEVBQVF0QixVQXhDTyxneURBeUNmUCxTQUFTQyxjQUFjLFFBQVE4QixZQUFZRixFQUFRLEVBR3JERyxHQUdBLE1BQU1DLEVBQXNCLENBQUNDLEVBQVdDLEVBQVEsTUFDOUMsR0FBSUQsRUFBVTVCLE9BQVEsQ0FDcEIsTUFBTThCLEVBQVVGLEVBQVViLEtBQUtnQixJQUM3QixNQUFNQyxFQUFVSCxFQUFNSSxNQUFNQyxHQUN0QkEsRUFBS0MsVUFBWUosRUFBUUssS0FBS0MsT0FBT0MsTUFBTSxLQUFLLEdBQzNDSixFQUVGLE9BRVQsTUFBTyxJQUNGSCxFQUNIUSxXQUFZUCxFQUFVQSxFQUFRSCxNQUFRLEVBQ3ZDLElBR0NDLEVBQVE5QixRQXBKU0csT0FBTzJCLElBQzlCLElBQUlVLEVBQWUsR0FDbkJWLEVBQVFXLFNBQVNWLElBQ2YsTUFBTVcsRUFBWVgsRUFBUUssS0FBS0MsT0FBT0MsTUFBTSxLQUFLLEdBQzNDSyxFQUFPLGlEQUNYWixFQUFRSyxLQUFLQyxrREFFcUJOLEVBQVFLLEtBQUtDLHFFQUNNTixFQUFRYSxNQUFNQyw2S0FHakNkLEVBQVFLLEtBQUtDLG9IQUVrQkssa1pBRzdCWCxFQUFRUSx5TEFLYlIsRUFBUWUsV0FBV0MsZUFBZSw0SkFJdENoQixFQUFRaUIsNEpBSVBqQixFQUFRa0IsdUtBRThGbEIsRUFBUUssS0FBS0MsbUVBSWpKRyxHQUFnQkcsQ0FBSSxJQUd0QixZQUF3QkgsRUFHRDlDLFNBQVNDLGNBQWMsb0JBQy9CdUQsWUFBMkIsV0c1RnRCbEQsT0g4RkdOLFNBQVN5RCxpQkFBaUIsU0FDbENWLFNBQVNXLElBQ3RCQSxFQUFRQyxpQkFBaUIsU0FBVUMsSUFFakMsR0FBSUEsRUFBRUMsT0FBT0MsVUFBVUMsU0FBUyxlQUFnQixDQUM5QzdELElBQ0EsTUFBTThELEVBQWNKLEVBQUVDLE9BQU9JLGFBQWEsTUFDNUJqRSxTQUFTQyxjQUFjLFVBQy9CaUUsYUFBYSxVQUFXRixHQUM5QixNQUFNRyxFQTlGVSxFQUFDSCxFQUFhSSxJQUNyQkEsRUFBVzdCLE1BQU04QixHQUFTQSxFQUFLM0IsS0FBS0MsU0FBV3FCLEVBQVlNLFNBNkZyREMsQ0FBZ0JQLEVBQWE1QixHQUN0Q29DLEVBQU14RSxTQUFTQyxjQUFjLGdCQUM3QndFLEVBQVF6RSxTQUFTQyxjQUFjLGtCQUMvQm1ELEVBQWFwRCxTQUFTQyxjQUFjLHFCQUNwQ3lFLEVBQVcxRSxTQUFTQyxjQUFjLGFBQ3hDdUUsRUFBSU4sYUFBYSxNQUFPQyxFQUFPakIsTUFBTUMsS0FDckNzQixFQUFNbEUsVUFBWTRELEVBQU96QixLQUFLQyxPQUM5QlMsRUFBVzdDLFVBQVk0RCxFQUFPZixXQUFXQyxlQUFlLFNBQ3hEcUIsRUFBU25FLFVBQVk0RCxFQUFPekIsS0FBS2dDLFNBR2pDbEUsRUFBZTJELEVBQU96QixLQUFLQyxPQUM3QixDQUdJaUIsRUFBRUMsT0FBT2MsV0FBV0EsV0FBV2IsVUFBVUMsU0FBUyxhSTlHNUN0RCxPQUFPQyxVQUNFRyxNQUFNLEdBQUdmLFVBQXNCQyxVQUFnQixDQUNwRWUsT0FBUSxPQUNSOEQsUUFBUyxDQUFFLGVBQWdCLG9CQUMzQkMsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQnRDLFFBQVMvQixPQUdHc0UsT0p3R1ZDLENBRG9CckIsRUFBRUMsT0FBT2MsV0FBV0EsV0FBV1YsYUFBYSxPQUMzQ2hELE1BQUssS0FDeEIsTUFBTWlFLEVBQWVDLE9BQ25CdkIsRUFBRUMsT0FBT2MsV0FBV0EsV0FBV1MsbUJBQW1CNUIsYUFFcERJLEVBQUVDLE9BQU9jLFdBQVdBLFdBQVdTLG1CQUFtQjVCLFlBQWM2QixPQUM5REgsRUFBZSxFQUNoQixHQUVMLEdBQ0EsR0FDRixFQXFFRUksQ0FBaUJsRCxFQUVyQixHQUtrQnBDLFNBQVNDLGNBQWMsZ0JBQy9CMEQsaUJBQWlCLFNBQVMsS0FDbEMsTUFDTTRCLEVBREt2RixTQUFTd0YsZUFBZSxnQkFBZ0J2QixhQUFhLFdBQzNDSyxPQUNmOUMsRUFBV3hCLFNBQVN3RixlQUFlLFFBQVFDLE1BQzNDbkUsRUFBVXRCLFNBQVN3RixlQUFlLFlBQVlDLE1BTW5DLEtBQWJqRSxHQUErQixLQUFaRixHRWpOUmIsT0FBT1MsVUFDREwsTUFBTSxHQUFHZixVQUFzQkMsYUFBbUIsQ0FDdkVlLE9BQVEsT0FDUjhELFFBQVMsQ0FBRSxlQUFnQixvQkFDM0JDLEtBQU1DLEtBQUtDLFVBQVU3RCxNQUVQOEQsT0Y0TVpVLENBTmlCLENBQ2pCakQsUUFBUzhDLEVBQ1QvRCxXQUNBRixZQUd1QkwsTUFBSyxLQUMxQlQsRUFBZStFLEdBQ2Z2RixTQUFTd0YsZUFBZSxRQUFRQyxNQUFRLEdBQ3hDekYsU0FBU3dGLGVBQWUsWUFBWUMsTUFBUSxFQUFFLEdBRWxELElBd0JKekYsU0FBUzJELGlCQUFpQixvQkFsQkFsRCxlSGxPTEEsaUJBQ0lJLE1BQU0sdUNBQ2JFLE9HaU9WLEdBQ0hFLE1BQU1DLElBQ0wsRUFBWUEsRUFBS3lFLE1BQU0sRUFBRyxHSXRPZmxGLGdCQUNRSSxNQUFNLEdBQUdmLFVBQXNCQyxXSnNPM0M2RixNQUVSM0UsTUFBTTRFLElBQ0xBLEVBQ0c5RSxPQUNBRSxNQUFNQyxJQUNMZSxFQUFvQixFQUFXZixFQUFLLElBRXJDUSxPQUFNLEtBQ0xPLEVBQW9CLEVBQVcsR0FBRyxHQUNsQyxHQUNKLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvY291bnRyaWVzLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvbW9kdWxlcy9JbnZvbHZlbWVudC5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvRE9NRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvY29tbWVudHNDb3VudGVyLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvbW9kdWxlcy9jb21tZW50cy5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvSXRlbXNDb3VudGVyLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvbW9kdWxlcy9saWtlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3VudHJpZXMgQVBJXG5jb25zdCBCQVNFX1VSTCA9ICdodHRwczovL3Jlc3Rjb3VudHJpZXMuY29tL3YzLjEnO1xuXG4vLyBHZXQgbGlzdCBvZiBjb3VudHJpZXNcbmNvbnN0IGdldENvdW50cmllcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0vYWxsYCk7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXRDb3VudHJpZXM7XG4iLCIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb3BlcmF0b3ItbGluZWJyZWFrXG5jb25zdCBJTlZWT0xWRURfVVJMID1cbiAgJ2h0dHBzOi8vdXMtY2VudHJhbDEtaW52b2x2ZW1lbnQtYXBpLmNsb3VkZnVuY3Rpb25zLm5ldC9jYXBzdG9uZUFwaSc7XG5cbmNvbnN0IEFQUF9JRCA9ICcxNEtxUnZDWjVDVFJkc0dMZ3VXRic7XG5cbmV4cG9ydCB7IElOVlZPTFZFRF9VUkwsIEFQUF9JRCB9OyIsImNvbnN0IGNvdW50cnlMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdW50cnktbGlzdCcpO1xuXG5leHBvcnQgZGVmYXVsdCBjb3VudHJ5TGlzdDtcbiIsImltcG9ydCBnZXRDb3VudHJpZXMgZnJvbSAnLi9tb2R1bGVzL2NvdW50cmllcy5qcyc7XG5pbXBvcnQgeyBzaG93Q29tbWVudHMsIGFkZENvbW1lbnQgfSBmcm9tICcuL21vZHVsZXMvY29tbWVudHMuanMnO1xuaW1wb3J0IHsgZ2V0TGlrZXMsIGFkZExpa2UgfSBmcm9tICcuL21vZHVsZXMvbGlrZXMuanMnO1xuaW1wb3J0IE51bWJlck9mQ29tbWVudHMgZnJvbSAnLi9tb2R1bGVzL2NvbW1lbnRzQ291bnRlci5qcyc7XG5pbXBvcnQgY291bnRyeUNvdW50IGZyb20gJy4vbW9kdWxlcy9JdGVtc0NvdW50ZXIuanMnO1xuaW1wb3J0IGNvdW50cnlMaXN0IGZyb20gJy4vbW9kdWxlcy9ET01FbGVtZW50cy5qcyc7XG5cbmxldCBjb3VudHJpZXMgPSBbXTtcblxuLy8gR2V0IHRoZSBzcGVjaWZpYyBjb3VudHJ5XG5jb25zdCBmaWx0ZXJDb3VudHJpZXMgPSAoY291bnRyeU5hbWUsIGNvdW50cnlBcnIpID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gY291bnRyeUFyci5maW5kKChpdGVtKSA9PiBpdGVtLm5hbWUuY29tbW9uID09PSBjb3VudHJ5TmFtZS50cmltKCkpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gR2V0dGluZyB0aGUgbnVtYmVyIG9mIGNvbW1lbnRzXG5jb25zdCBnZXROdW1PZkNvbW1lbnRzID0gKCkgPT4ge1xuICBjb25zdCBDb21tZW50c0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1ncm91cCcpO1xuICBjb25zdCBjb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbW1lbnRzQ291bnRlcicpO1xuICBpZiAoQ29tbWVudHNDb3VudGVyLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBjb3VudGVyLmlubmVySFRNTCA9IE51bWJlck9mQ29tbWVudHMoQ29tbWVudHNDb3VudGVyLmNoaWxkcmVuKTtcbiAgfSBlbHNlIHtcbiAgICBjb3VudGVyLmlubmVySFRNTCA9ICcwJztcbiAgfVxufTtcblxuY29uc3QgZ2V0Q29tbWVudExpc3QgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3QgdWxDb21tZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWdyb3VwJyk7XG4gIGlmIChpZCkge1xuICAgIGF3YWl0IHNob3dDb21tZW50cyhpZClcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBsaXN0ID0gZGF0YS5tYXAoKGNvbW1lbnQpID0+IGA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8c3Bhbj4ke2NvbW1lbnQuY3JlYXRpb25fZGF0ZX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuPiR7Y29tbWVudC51c2VybmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuPiR7Y29tbWVudC5jb21tZW50fTwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGk+YCk7XG4gICAgICAgICAgdWxDb21tZW50cy5pbm5lckhUTUwgPSBsaXN0LmpvaW4oJycpO1xuICAgICAgICAgIGdldE51bU9mQ29tbWVudHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcignTm8gY29tbWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+JHtlcnIubWVzc2FnZX08L2xpPmA7XG4gICAgICAgIHVsQ29tbWVudHMuaW5uZXJIVE1MID0gbGlzdDtcbiAgICAgIH0pO1xuICB9XG59O1xuXG4vLyBEaXNwbGF5IHRoZSBsaXN0IG9mIGNvdW50cmllc1xuY29uc3QgZGlzcGxheUNvdW50cmllcyA9IGFzeW5jIChuZXdMaXN0KSA9PiB7XG4gIGxldCBhbGxDb3VudHJpZXMgPSAnJztcbiAgbmV3TGlzdC5mb3JFYWNoKChjb3VudHJ5KSA9PiB7XG4gICAgY29uc3QgY291bnRyeUlkID0gY291bnRyeS5uYW1lLmNvbW1vbi5zcGxpdCgnICcpWzBdO1xuICAgIGNvbnN0IGh0bWwgPSBgPGRpdiBjbGFzcz1cImNvbC0xMiBjb2wtc20tNiBjb2wtbGctM1wiIGRhdGEtaWQ9JHtcbiAgICAgIGNvdW50cnkubmFtZS5jb21tb25cbiAgICB9PlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkIG14LWF1dG9cIiBkYXRhLWlkPSR7Y291bnRyeS5uYW1lLmNvbW1vbn0+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1pbWdcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke2NvdW50cnkuZmxhZ3Muc3ZnfSlcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImMtaGVhZGVyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICAgIDxoNCBjbGFzcz1cImNhcmQtdGl0bGUgbWItMFwiPiR7Y291bnRyeS5uYW1lLmNvbW1vbn08L2g0PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaWtlc1wiPlxuICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIHR5cGU9XCJidXR0b25cIiBjbGFzcz0nYWRkLWxpa2UnIGlkPSR7Y291bnRyeUlkfT5cbiAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGQ9XCJNNC4zMTggNi4zMThhNC41IDQuNSAwIDAwMCA2LjM2NEwxMiAyMC4zNjRsNy42ODItNy42ODJhNC41IDQuNSAwIDAwLTYuMzY0LTYuMzY0TDEyIDcuNjM2bC0xLjMxOC0xLjMxOGE0LjUgNC41IDAgMDAtNi4zNjQgMHpcIj48L3BhdGg+PC9zdmc+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxpa2VzLWNvdW50ZXJcIj4ke2NvdW50cnkubGlrZXNDb3VudH08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dCBzbWFsbCBtYi0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwLWxlYWRcIj5Qb3B1bGF0aW9uOiA8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwb3B1bGF0aW9uXCI+JHtjb3VudHJ5LnBvcHVsYXRpb24udG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJyl9PC9zcGFuPlxuICAgICAgICA8L3A+XG4gICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0IHNtYWxsIG1iLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInAtbGVhZFwiPlJlZ2lvbjogPC9zcGFuPiBcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlZ2lvblwiPiR7Y291bnRyeS5yZWdpb259PC9zcGFuPlxuICAgICAgICA8L3A+XG4gICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0IHNtYWxsIG1iLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInAtbGVhZFwiPkNhcGl0YWw6IDwvc3Bhbj4gXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXBpdGFsXCI+JHtjb3VudHJ5LmNhcGl0YWx9PC9zcGFuPlxuICAgICAgICA8L3A+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBjb21tZW50LWJ0blwiIGRhdGEtYnMtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLWJzLXRhcmdldD1cIiNleGFtcGxlTW9kYWxcIiBpZD1cIiR7Y291bnRyeS5uYW1lLmNvbW1vbn1cIj5TZWUgRGV0YWlsczwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PmA7XG4gICAgYWxsQ291bnRyaWVzICs9IGh0bWw7XG4gIH0pO1xuXG4gIGNvdW50cnlMaXN0LmlubmVySFRNTCA9IGFsbENvdW50cmllcztcblxuICAvLyBDb3VudHJ5IENvdW50ZXJcbiAgY29uc3QgY291bnRyeUNvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY291bnRyeS1jb3VudGVyJyk7XG4gIGNvdW50cnlDb3VudGVyLnRleHRDb250ZW50ID0gY291bnRyeUNvdW50KGNvdW50cnlMaXN0LmNoaWxkcmVuKTtcblxuICBjb25zdCBjb3VudHJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkJyk7XG4gIGNvdW50cnlFbGVtZW50LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIC8vIE9wZW4gTW9kYWwgZGlhbG9nXG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21tZW50LWJ0bicpKSB7XG4gICAgICAgIGdldE51bU9mQ29tbWVudHMoKTtcbiAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG4gICAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGNvdW50cnlOYW1lKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsdGVyQ291bnRyaWVzKGNvdW50cnlOYW1lLCBuZXdMaXN0KTtcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvdW50cnktaW1nJyk7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvdW50cnktdGl0bGUnKTtcbiAgICAgICAgY29uc3QgcG9wdWxhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1wb3B1bGF0aW9uJyk7XG4gICAgICAgIGNvbnN0IG9mZmljaWFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9mZmljaWFsJyk7XG4gICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHJlc3VsdC5mbGFncy5zdmcpO1xuICAgICAgICB0aXRsZS5pbm5lckhUTUwgPSByZXN1bHQubmFtZS5jb21tb247XG4gICAgICAgIHBvcHVsYXRpb24uaW5uZXJIVE1MID0gcmVzdWx0LnBvcHVsYXRpb24udG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJyk7XG4gICAgICAgIG9mZmljaWFsLmlubmVySFRNTCA9IHJlc3VsdC5uYW1lLm9mZmljaWFsO1xuXG4gICAgICAgIC8vIGRpc3BsYXlpbmcgY29tbWVudHNcbiAgICAgICAgZ2V0Q29tbWVudExpc3QocmVzdWx0Lm5hbWUuY29tbW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIExpa2UgQ291bnRlclxuICAgICAgaWYgKGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC1saWtlJykpIHtcbiAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICBhZGRMaWtlKGNvdW50cnlOYW1lKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSBOdW1iZXIoXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50LFxuICAgICAgICAgICk7XG4gICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IFN0cmluZyhcbiAgICAgICAgICAgIGN1cnJlbnRDb3VudCArIDEsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLy8gZGlzcGxheSBtb2RhbCBkaWFsb2dcbmNvbnN0IG1vZGFsRGlhbG9nID0gKCkgPT4ge1xuICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICBjb25zdCBkaWFsb2cgPSBgPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBpZD1cImV4YW1wbGVNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiBhcmlhLWxhYmVsbGVkYnk9XCJleGFtcGxlTW9kYWxMYWJlbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy1zY3JvbGxhYmxlXCI+XG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICA8c2VjdGlvbiBjbGFzcz1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgPGltZyBpZD1cImNvdW50cnktaW1nXCIgc3JjPVwiXCIgYWx0PVwibW9kYWwgaW1hZ2VcIj5cbiAgICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgIDxoMyBpZD1cImNvdW50cnktdGl0bGVcIiBjbGFzcz1cIm10LTJcIj48L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHQgbWItMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInAtbGVhZFwiPlBvcHVsYXRpb246IDwvc3Bhbj4gXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibW9kYWwtcG9wdWxhdGlvblwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0IG1iLTJcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwLWxlYWRcIj5PZmZpY2lhbCBOYW1lOiA8L3NwYW4+IFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm9mZmljaWFsXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICA8c2VjdGlvbiBjbGFzcz1cImNvbW1lbnQtc2VjdGlvblwiPlxuICAgICAgICAgIDxoNCBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgZ2FwLTIganVzdGlmeS1jb250ZW50LWNlbnRlclwiPjxzcGFuIGNsYXNzPVwiY29tbWVudHNDb3VudGVyIGJhZGdlIGJnLXNlY29uZGFyeSByb3VuZGVkLXBpbGxcIj48L3NwYW4+PHNwYW4+Q29tbWVudHM8L3NwYW4+PC9oND5cbiAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LWdyb3VwIG10LTRcIj48L3VsPlxuICAgICAgICA8L3NlY3Rpb24+XG5cbiAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJtdC01XCI+XG4gICAgICAgICAgPGZvcm0+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm5hbWVcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiWW91ciBuYW1lXCIgYXJpYS1sYWJlbD1cIkZ1bGwgTmFtZVwiPlxuICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiaW5zaWdodHNcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJSZW1hcmtzXCIgYXJpYS1sYWJlbD1cIlJlbWFya3NcIj48L3RleHRhcmVhPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgaWQ9J2FkZC1jb21tZW50JyBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiPkNvbW1lbnQ8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj5DbG9zZTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+YDtcbiAgc2VjdGlvbi5pbm5lckhUTUwgPSBkaWFsb2c7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hcHBlbmRDaGlsZChzZWN0aW9uKTtcbn07XG5cbm1vZGFsRGlhbG9nKCk7XG5cbi8vIGNyZWF0ZSBvYmogZm9yIGVhY2ggY291bnRyeSB0byBpbmNsdWRlIGxpa2VzQ291bnRcbmNvbnN0IGNyZWF0ZU5ld0NvdW50cnlPYmogPSAoY291bnRyaWVzLCBsaWtlcyA9IFtdKSA9PiB7XG4gIGlmIChjb3VudHJpZXMubGVuZ3RoKSB7XG4gICAgY29uc3QgbmV3TGlzdCA9IGNvdW50cmllcy5tYXAoKGNvdW50cnkpID0+IHtcbiAgICAgIGNvbnN0IGxpa2VzTm8gPSBsaWtlcy5maW5kKChsaWtlKSA9PiB7XG4gICAgICAgIGlmIChsaWtlLml0ZW1faWQgPT09IGNvdW50cnkubmFtZS5jb21tb24uc3BsaXQoJyAnKVswXSkge1xuICAgICAgICAgIHJldHVybiBsaWtlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jb3VudHJ5LFxuICAgICAgICBsaWtlc0NvdW50OiBsaWtlc05vID8gbGlrZXNOby5saWtlcyA6IDAsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgaWYgKG5ld0xpc3QubGVuZ3RoKSB7XG4gICAgICBkaXNwbGF5Q291bnRyaWVzKG5ld0xpc3QpO1xuICAgIH1cbiAgfVxufTtcblxuLy8gYWRkIGNvbW1lbnRcbmNvbnN0IGNyZWF0ZUNvbW1lbnQgPSAoKSA9PiB7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtY29tbWVudCcpO1xuICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZU1vZGFsJykuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG4gICAgY29uc3QgY29tbWVudElEID0gaWQudHJpbSgpO1xuICAgIGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKS52YWx1ZTtcbiAgICBjb25zdCBjb21tZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc2lnaHRzJykudmFsdWU7XG4gICAgY29uc3QgY29tbWVudE9iaiA9IHtcbiAgICAgIGl0ZW1faWQ6IGNvbW1lbnRJRCxcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgY29tbWVudCxcbiAgICB9O1xuICAgIGlmICh1c2VybmFtZSAhPT0gJycgJiYgY29tbWVudCAhPT0gJycpIHtcbiAgICAgIGFkZENvbW1lbnQoY29tbWVudE9iaikudGhlbigoKSA9PiB7XG4gICAgICAgIGdldENvbW1lbnRMaXN0KGNvbW1lbnRJRCk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJykudmFsdWUgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc2lnaHRzJykudmFsdWUgPSAnJztcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jcmVhdGVDb21tZW50KCk7XG5cbmNvbnN0IGZldGNoQWxsQ291bnRyaWVzID0gYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBnZXRDb3VudHJpZXMoKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb3VudHJpZXMgPSBkYXRhLnNsaWNlKDAsIDgpO1xuICAgICAgcmV0dXJuIGdldExpa2VzKCk7XG4gICAgfSlcbiAgICAudGhlbigocmVzcG9uc2UxKSA9PiB7XG4gICAgICByZXNwb25zZTFcbiAgICAgICAgLmpzb24oKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNyZWF0ZU5ld0NvdW50cnlPYmooY291bnRyaWVzLCBkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICBjcmVhdGVOZXdDb3VudHJ5T2JqKGNvdW50cmllcywgW10pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmZXRjaEFsbENvdW50cmllcyk7XG4iLCJjb25zdCBOdW1iZXJPZkNvbW1lbnRzID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY291bnRlciA9IGl0ZW0ubGVuZ3RoO1xuICByZXR1cm4gY291bnRlcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE51bWJlck9mQ29tbWVudHM7XG4iLCJpbXBvcnQgeyBJTlZWT0xWRURfVVJMLCBBUFBfSUQgfSBmcm9tICcuL0ludm9sdmVtZW50LmpzJztcblxuY29uc3Qgc2hvd0NvbW1lbnRzID0gYXN5bmMgKGlkKSA9PiB7XG4gIGNvbnN0IHVybCA9IGAke0lOVlZPTFZFRF9VUkx9L2FwcHMvJHtBUFBfSUR9L2NvbW1lbnRzP2l0ZW1faWQ9JHtpZH1gO1xuICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJyB9O1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpO1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufTtcblxuY29uc3QgYWRkQ29tbWVudCA9IGFzeW5jIChkYXRhKSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7SU5WVk9MVkVEX1VSTH0vYXBwcy8ke0FQUF9JRH0vY29tbWVudHNgLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gIH0pO1xuICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xufTtcblxuZXhwb3J0IHsgc2hvd0NvbW1lbnRzLCBhZGRDb21tZW50IH07XG4iLCJjb25zdCBudW1PZkNvdW50cmllcyA9IChpdGVtcykgPT4ge1xuICBjb25zdCBjb3VudCA9IGl0ZW1zLmxlbmd0aDtcbiAgcmV0dXJuIGNvdW50O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbnVtT2ZDb3VudHJpZXM7XG4iLCJpbXBvcnQgeyBJTlZWT0xWRURfVVJMLCBBUFBfSUQgfSBmcm9tICcuL0ludm9sdmVtZW50LmpzJztcblxuLy8gR2V0IGFsbCBMaWtlcyAtLS0tLT4gIC9hcHBzLzphcHBfaWQvbGlrZXMvXG5jb25zdCBnZXRMaWtlcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtJTlZWT0xWRURfVVJMfS9hcHBzLyR7QVBQX0lEfS9saWtlc2ApO1xuICByZXR1cm4gcmVzcG9uc2U7XG59O1xuXG4vLyBhZGQgbGlrZSAgLS0tLS0tLT4gL2FwcHMvOmFwcF9pZC9saWtlcy9cbmNvbnN0IGFkZExpa2UgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtJTlZWT0xWRURfVVJMfS9hcHBzLyR7QVBQX0lEfS9saWtlc2AsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBpdGVtX2lkOiBpZCxcbiAgICB9KSxcbiAgfSk7XG4gIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG59O1xuXG5leHBvcnQgeyBnZXRMaWtlcywgYWRkTGlrZSB9O1xuIl0sIm5hbWVzIjpbIklOVlZPTFZFRF9VUkwiLCJBUFBfSUQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXROdW1PZkNvbW1lbnRzIiwiQ29tbWVudHNDb3VudGVyIiwiY291bnRlciIsImNoaWxkcmVuIiwibGVuZ3RoIiwiaW5uZXJIVE1MIiwiZ2V0Q29tbWVudExpc3QiLCJhc3luYyIsImlkIiwidWxDb21tZW50cyIsInVybCIsImZldGNoIiwibWV0aG9kIiwianNvbiIsInNob3dDb21tZW50cyIsInRoZW4iLCJkYXRhIiwiRXJyb3IiLCJsaXN0IiwibWFwIiwiY29tbWVudCIsImNyZWF0aW9uX2RhdGUiLCJ1c2VybmFtZSIsImpvaW4iLCJjYXRjaCIsImVyciIsIm1lc3NhZ2UiLCJzZWN0aW9uIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwibW9kYWxEaWFsb2ciLCJjcmVhdGVOZXdDb3VudHJ5T2JqIiwiY291bnRyaWVzIiwibGlrZXMiLCJuZXdMaXN0IiwiY291bnRyeSIsImxpa2VzTm8iLCJmaW5kIiwibGlrZSIsIml0ZW1faWQiLCJuYW1lIiwiY29tbW9uIiwic3BsaXQiLCJsaWtlc0NvdW50IiwiYWxsQ291bnRyaWVzIiwiZm9yRWFjaCIsImNvdW50cnlJZCIsImh0bWwiLCJmbGFncyIsInN2ZyIsInBvcHVsYXRpb24iLCJ0b0xvY2FsZVN0cmluZyIsInJlZ2lvbiIsImNhcGl0YWwiLCJ0ZXh0Q29udGVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNvdW50cnlOYW1lIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicmVzdWx0IiwiY291bnRyeUFyciIsIml0ZW0iLCJ0cmltIiwiZmlsdGVyQ291bnRyaWVzIiwiaW1nIiwidGl0bGUiLCJvZmZpY2lhbCIsInBhcmVudE5vZGUiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZXh0IiwiYWRkTGlrZSIsImN1cnJlbnRDb3VudCIsIk51bWJlciIsIm5leHRFbGVtZW50U2libGluZyIsIlN0cmluZyIsImRpc3BsYXlDb3VudHJpZXMiLCJjb21tZW50SUQiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwiYWRkQ29tbWVudCIsInNsaWNlIiwiZ2V0TGlrZXMiLCJyZXNwb25zZTEiXSwic291cmNlUm9vdCI6IiJ9