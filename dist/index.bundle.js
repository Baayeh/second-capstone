"use strict";(self.webpackChunkwebpack_template=self.webpackChunkwebpack_template||[]).push([[826],{510:()=>{const t=document.querySelector(".country-list"),n="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi",e="IgY08bvfNLdtRYcSagqI";let o=[];const s=document.querySelector("#item-modal");document.getElementsByClassName("close")[0].onclick=()=>{s.style.display="none"};const a=async o=>{t.innerHTML=o.map((t=>{const n=t.name.common.split(" ")[0];return`<li class="country-item" data-id=${t.name.common}>\n        <div class="card">\n          <div class="country-img">\n            <img src="${t.flags.svg}" alt='${t.name.common} flag'>\n          </div>\n          <div class="card-body">\n            <p class="country-name mb-0">${t.name.common}</p>\n            <div class="likes">\n              <a href="javascript:;" type="button" class='add-like' id=${n}>\n                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>\n              </a>\n              <span class="likes-counter">${t.likesCount}</span>\n            </div>\n          </div>\n          <div class="actions">\n            <button type="button" class="comment-btn" id="${t.name.common}\n    ">Comments</button>\n          </div>\n        </div>\n      </li>`})).join(""),document.querySelector("#country-counter").textContent=t.children.length,document.querySelectorAll(".country-item").forEach((t=>{t.addEventListener("click",(t=>{if(t.target.classList.contains("comment-btn")){const n=(a=t.target.getAttribute("id"),o.find((t=>t.name.common===a.trim())));s.style.display="block";const e=document.querySelector("#country-img"),c=document.querySelector("#country-title"),i=document.querySelector("#population"),l=document.querySelector("#sub-region");e.setAttribute("src",n.flags.svg),c.innerHTML=n.name.common,i.innerHTML=`Population: ${n.population}`,l.innerHTML=n.subregion;const r=document.querySelector(".comment-list");(async t=>{t===n.name.common&&await(async t=>{const n=`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/IgY08bvfNLdtRYcSagqI/comments?item_id=${t}`;return(await fetch(n,{method:"GET"})).json()})(t).then((t=>{if(!(t.length>0))throw Error("No comments added!!");{const n=t.map((t=>`<li>\n                      <span>${t.creation_date}</span>\n                      <span>${t.username}</span>\n                      <span>${t.comment}</span>\n                      </li>`));r.innerHTML=n.join("")}})).catch((t=>{r.innerHTML=t.message}))})(n.name.common)}var a;t.target.parentElement.classList.contains("add-like")&&(async t=>(await fetch(`${n}/apps/${e}/likes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:t})})).text())(t.target.parentElement.getAttribute("id")).then((()=>{const n=Number(t.target.parentElement.nextElementSibling.textContent);t.target.parentElement.nextElementSibling.textContent=String(n+1)}))}))}))},c=(t,n=[])=>{if(t.length){const e=t.map((t=>{const e=n.find((n=>{if(n.item_id===t.name.common.split(" ")[0])return n}));return{...t,likesCount:e?e.likes:0}}));e.length&&a(e)}};document.addEventListener("DOMContentLoaded",(async()=>{await(async()=>(await fetch("https://restcountries.com/v3.1/all")).json())().then((t=>(o=t.slice(0,6),(async()=>await fetch(`${n}/apps/${e}/likes`))()))).then((t=>{t.json().then((t=>{c(o,t)})).catch((()=>{c(o,[])}))}))}))}},t=>{t(t.s=510)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUFRLE1BQzlDLEdBQUlELEVBQVVuRCxPQUFRLENBQ3BCLE1BQU1kLEVBQVVpRSxFQUFVL0QsS0FBS0MsSUFDN0IsTUFBTWdFLEVBQVVELEVBQU14QyxNQUFNMEMsSUFDMUIsR0FBSUEsRUFBS1gsVUFBWXRELEVBQVFFLEtBQUtDLE9BQU9DLE1BQU0sS0FBSyxHQUNsRCxPQUFPNkQsQ0FDVCxJQUVGLE1BQU8sSUFDRmpFLEVBQ0hPLFdBQVl5RCxFQUFVQSxFQUFRRCxNQUFRLEVBQ3ZDLElBR0hsRSxFQUFRYyxRQUFVaEIsRUFBaUJFLEVBQ3JDLEdBcUJGWCxTQUFTNkIsaUJBQWlCLG9CQWxCQW5CLGVIbklMQSxpQkFDSXVDLE1BQU0sdUNBQ2JFLE9Ha0lWLEdBQ0hDLE1BQU1DLElBQ0wsRUFBWUEsRUFBSzJCLE1BQU0sRUFBRyxHRG5JZnRFLGdCQUNRdUMsTUFBTSxHQUFHL0MsVUFBc0JDLFdDbUkzQzhFLE1BRVI3QixNQUFNOEIsSUFDTEEsRUFDRy9CLE9BQ0FDLE1BQU1DLElBQ0xzQixFQUFvQixFQUFXdEIsRUFBSyxJQUVyQ00sT0FBTSxLQUNMZ0IsRUFBb0IsRUFBVyxHQUFHLEdBQ2xDLEdBQ0osRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvbW9kdWxlcy9jb3VudHJpZXMuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9tb2R1bGVzL0RPTUVsZW1lbnRzLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvbW9kdWxlcy9saWtlcy5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvbW9kdWxlcy9JdGVtc0NvdW50ZXIuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9tb2R1bGVzL2NvbW1lbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvdW50cmllcyBBUElcbmNvbnN0IEJBU0VfVVJMID0gJ2h0dHBzOi8vcmVzdGNvdW50cmllcy5jb20vdjMuMSc7XG5cbi8vIEdldCBsaXN0IG9mIGNvdW50cmllc1xuY29uc3QgZ2V0Q291bnRyaWVzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0JBU0VfVVJMfS9hbGxgKTtcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldENvdW50cmllcztcbiIsImNvbnN0IGNvdW50cnlMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdW50cnktbGlzdCcpO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydFxuZXhwb3J0IHsgY291bnRyeUxpc3QgfTtcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvcGVyYXRvci1saW5lYnJlYWtcbmNvbnN0IElOVlZPTFZFRF9VUkwgPVxuICAnaHR0cHM6Ly91cy1jZW50cmFsMS1pbnZvbHZlbWVudC1hcGkuY2xvdWRmdW5jdGlvbnMubmV0L2NhcHN0b25lQXBpJztcblxuY29uc3QgQVBQX0lEID0gJ0lnWTA4YnZmTkxkdFJZY1NhZ3FJJztcblxuLy8gR2V0IGFsbCBMaWtlcyAtLS0tLT4gIC9hcHBzLzphcHBfaWQvbGlrZXMvXG5jb25zdCBnZXRMaWtlcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtJTlZWT0xWRURfVVJMfS9hcHBzLyR7QVBQX0lEfS9saWtlc2ApO1xuICByZXR1cm4gcmVzcG9uc2U7XG59O1xuXG4vLyBhZGQgbGlrZSAgLS0tLS0tLT4gL2FwcHMvOmFwcF9pZC9saWtlcy9cbmNvbnN0IGFkZExpa2UgPSBhc3luYyAoaWQpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtJTlZWT0xWRURfVVJMfS9hcHBzLyR7QVBQX0lEfS9saWtlc2AsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBpdGVtX2lkOiBpZCxcbiAgICB9KSxcbiAgfSk7XG4gIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG59O1xuXG5leHBvcnQge1xuICBJTlZWT0xWRURfVVJMLCBBUFBfSUQsIGdldExpa2VzLCBhZGRMaWtlLFxufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIGltcGxpY2l0LWFycm93LWxpbmVicmVhayAqL1xuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIGFycmF5LWNhbGxiYWNrLXJldHVybiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb21tYS1kYW5nbGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGFycm93LWJvZHktc3R5bGUgKi9cbmltcG9ydCBnZXRDb3VudHJpZXMgZnJvbSAnLi9tb2R1bGVzL2NvdW50cmllcy5qcyc7XG5pbXBvcnQgeyBjb3VudHJ5TGlzdCB9IGZyb20gJy4vbW9kdWxlcy9ET01FbGVtZW50cy5qcyc7XG5pbXBvcnQgeyBnZXRMaWtlcywgYWRkTGlrZSB9IGZyb20gJy4vbW9kdWxlcy9saWtlcy5qcyc7XG5pbXBvcnQgc2hvd0NvbW1lbnRzIGZyb20gJy4vbW9kdWxlcy9jb21tZW50cy5qcyc7XG5pbXBvcnQgY291bnRyeUNvdW50IGZyb20gJy4vbW9kdWxlcy9JdGVtc0NvdW50ZXIuanMnO1xuXG5sZXQgY291bnRyaWVzID0gW107XG5cbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2l0ZW0tbW9kYWwnKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY2xvc2UnKVswXS5vbmNsaWNrID0gKCkgPT4ge1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufTtcblxuLy8gR2V0IHRoZSBzcGVjaWZpYyBjb3VudHJ5XG5jb25zdCBmaWx0ZXJDb3VudHJpZXMgPSAoY291bnRyeU5hbWUsIGNvdW50cnlBcnIpID0+XG4gIGNvdW50cnlBcnIuZmluZCgoaXRlbSkgPT4gaXRlbS5uYW1lLmNvbW1vbiA9PT0gY291bnRyeU5hbWUudHJpbSgpKTtcblxuLy8gRGlzcGxheSB0aGUgbGlzdCBvZiBjb3VudHJpZXNcbmNvbnN0IGRpc3BsYXlDb3VudHJpZXMgPSBhc3luYyAobmV3TGlzdCkgPT4ge1xuICBjb3VudHJ5TGlzdC5pbm5lckhUTUwgPSBuZXdMaXN0XG4gICAgLm1hcCgoY291bnRyeSkgPT4ge1xuICAgICAgY29uc3QgY291bnRyeUlkID0gY291bnRyeS5uYW1lLmNvbW1vbi5zcGxpdCgnICcpWzBdO1xuICAgICAgcmV0dXJuIGA8bGkgY2xhc3M9XCJjb3VudHJ5LWl0ZW1cIiBkYXRhLWlkPSR7Y291bnRyeS5uYW1lLmNvbW1vbn0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvdW50cnktaW1nXCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIiR7Y291bnRyeS5mbGFncy5zdmd9XCIgYWx0PScke2NvdW50cnkubmFtZS5jb21tb259IGZsYWcnPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiY291bnRyeS1uYW1lIG1iLTBcIj4ke2NvdW50cnkubmFtZS5jb21tb259PC9wPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxpa2VzXCI+XG4gICAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9J2FkZC1saWtlJyBpZD0ke2NvdW50cnlJZH0+XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGQ9XCJNNC4zMTggNi4zMThhNC41IDQuNSAwIDAwMCA2LjM2NEwxMiAyMC4zNjRsNy42ODItNy42ODJhNC41IDQuNSAwIDAwLTYuMzY0LTYuMzY0TDEyIDcuNjM2bC0xLjMxOC0xLjMxOGE0LjUgNC41IDAgMDAtNi4zNjQgMHpcIj48L3BhdGg+PC9zdmc+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaWtlcy1jb3VudGVyXCI+JHtjb3VudHJ5Lmxpa2VzQ291bnR9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY29tbWVudC1idG5cIiBpZD1cIiR7Y291bnRyeS5uYW1lLmNvbW1vbn1cbiAgICBcIj5Db21tZW50czwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbGk+YDtcbiAgICB9KVxuICAgIC5qb2luKCcnKTtcblxuICAvLyBDb3VudHJ5IENvdW50ZXJcbiAgY29uc3QgY291bnRyeUNvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY291bnRyeS1jb3VudGVyJyk7XG4gIGNvdW50cnlDb3VudGVyLnRleHRDb250ZW50ID0gY291bnRyeUNvdW50KGNvdW50cnlMaXN0LmNoaWxkcmVuKTtcblxuICBjb25zdCBjb3VudHJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb3VudHJ5LWl0ZW0nKTtcbiAgY291bnRyeUVsZW1lbnQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgLy8gT3BlbiBNb2RhbCBkaWFsb2dcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbW1lbnQtYnRuJykpIHtcbiAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckNvdW50cmllcyhjb3VudHJ5TmFtZSwgbmV3TGlzdCk7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY291bnRyeS1pbWcnKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY291bnRyeS10aXRsZScpO1xuICAgICAgICBjb25zdCBwb3B1bGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVsYXRpb24nKTtcbiAgICAgICAgY29uc3Qgc3ViUmVnaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1Yi1yZWdpb24nKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgcmVzdWx0LmZsYWdzLnN2Zyk7XG4gICAgICAgIHRpdGxlLmlubmVySFRNTCA9IHJlc3VsdC5uYW1lLmNvbW1vbjtcbiAgICAgICAgcG9wdWxhdGlvbi5pbm5lckhUTUwgPSBgUG9wdWxhdGlvbjogJHtyZXN1bHQucG9wdWxhdGlvbn1gO1xuICAgICAgICBzdWJSZWdpb24uaW5uZXJIVE1MID0gcmVzdWx0LnN1YnJlZ2lvbjtcblxuICAgICAgICAvLyBkaXNwbGF5aW5nIGNvbW1lbnRzXG4gICAgICAgIGNvbnN0IHVsQ29tbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tbWVudC1saXN0Jyk7XG4gICAgICAgIGNvbnN0IGdldENvbW1lbnRMaXN0ID0gYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgICAgaWYgKGlkID09PSByZXN1bHQubmFtZS5jb21tb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHNob3dDb21tZW50cyhpZClcbiAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBsaXN0ID0gZGF0YS5tYXAoKGNvbW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtjb21tZW50LmNyZWF0aW9uX2RhdGV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7Y29tbWVudC51c2VybmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtjb21tZW50LmNvbW1lbnR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvbGk+YDtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdWxDb21tZW50cy5pbm5lckhUTUwgPSBsaXN0LmpvaW4oJycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignTm8gY29tbWVudHMgYWRkZWQhIScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB1bENvbW1lbnRzLmlubmVySFRNTCA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGdldENvbW1lbnRMaXN0KHJlc3VsdC5uYW1lLmNvbW1vbik7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBMaWtlXG4gICAgICBpZiAoZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC1saWtlJykpIHtcbiAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgYWRkTGlrZShjb3VudHJ5TmFtZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gTnVtYmVyKFxuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnRcbiAgICAgICAgICApO1xuICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gU3RyaW5nKFxuICAgICAgICAgICAgY3VycmVudENvdW50ICsgMVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbi8vIGNyZWF0ZSBvYmogZm9yIGVhY2ggY291bnRyeSB0byBpbmNsdWRlIGxpa2VzQ291bnRcbmNvbnN0IGNyZWF0ZU5ld0NvdW50cnlPYmogPSAoY291bnRyaWVzLCBsaWtlcyA9IFtdKSA9PiB7XG4gIGlmIChjb3VudHJpZXMubGVuZ3RoKSB7XG4gICAgY29uc3QgbmV3TGlzdCA9IGNvdW50cmllcy5tYXAoKGNvdW50cnkpID0+IHtcbiAgICAgIGNvbnN0IGxpa2VzTm8gPSBsaWtlcy5maW5kKChsaWtlKSA9PiB7XG4gICAgICAgIGlmIChsaWtlLml0ZW1faWQgPT09IGNvdW50cnkubmFtZS5jb21tb24uc3BsaXQoJyAnKVswXSkge1xuICAgICAgICAgIHJldHVybiBsaWtlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNvdW50cnksXG4gICAgICAgIGxpa2VzQ291bnQ6IGxpa2VzTm8gPyBsaWtlc05vLmxpa2VzIDogMCxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBuZXdMaXN0Lmxlbmd0aCAmJiBkaXNwbGF5Q291bnRyaWVzKG5ld0xpc3QpO1xuICB9XG59O1xuXG5jb25zdCBmZXRjaEFsbENvdW50cmllcyA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgZ2V0Q291bnRyaWVzKClcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY291bnRyaWVzID0gZGF0YS5zbGljZSgwLCA2KTtcbiAgICAgIHJldHVybiBnZXRMaWtlcygpO1xuICAgIH0pXG4gICAgLnRoZW4oKHJlc3BvbnNlMSkgPT4ge1xuICAgICAgcmVzcG9uc2UxXG4gICAgICAgIC5qc29uKClcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICBjcmVhdGVOZXdDb3VudHJ5T2JqKGNvdW50cmllcywgZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlTmV3Q291bnRyeU9iaihjb3VudHJpZXMsIFtdKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZmV0Y2hBbGxDb3VudHJpZXMpO1xuIiwiY29uc3QgbnVtT2ZDb3VudHJpZXMgPSAoaXRlbXMpID0+IHtcbiAgY29uc3QgY291bnQgPSBpdGVtcy5sZW5ndGg7XG4gIHJldHVybiBjb3VudDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG51bU9mQ291bnRyaWVzO1xuIiwiY29uc3QgQkFTRV9VUkwgPSAnaHR0cHM6Ly91cy1jZW50cmFsMS1pbnZvbHZlbWVudC1hcGkuY2xvdWRmdW5jdGlvbnMubmV0L2NhcHN0b25lQXBpLyc7XG5cbmNvbnN0IHNob3dDb21tZW50cyA9IGFzeW5jIChpZCkgPT4ge1xuICBjb25zdCB1cmwgPSBgJHtCQVNFX1VSTH1hcHBzL0lnWTA4YnZmTkxkdFJZY1NhZ3FJL2NvbW1lbnRzP2l0ZW1faWQ9JHtpZH1gO1xuICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJyB9O1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpO1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgc2hvd0NvbW1lbnRzOyJdLCJuYW1lcyI6WyJjb3VudHJ5TGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIklOVlZPTFZFRF9VUkwiLCJBUFBfSUQiLCJtb2RhbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvbmNsaWNrIiwic3R5bGUiLCJkaXNwbGF5IiwiZGlzcGxheUNvdW50cmllcyIsImFzeW5jIiwibmV3TGlzdCIsImlubmVySFRNTCIsIm1hcCIsImNvdW50cnkiLCJjb3VudHJ5SWQiLCJuYW1lIiwiY29tbW9uIiwic3BsaXQiLCJmbGFncyIsInN2ZyIsImxpa2VzQ291bnQiLCJqb2luIiwidGV4dENvbnRlbnQiLCJjaGlsZHJlbiIsImxlbmd0aCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZXN1bHQiLCJjb3VudHJ5TmFtZSIsImdldEF0dHJpYnV0ZSIsImZpbmQiLCJpdGVtIiwidHJpbSIsImltZyIsInRpdGxlIiwicG9wdWxhdGlvbiIsInN1YlJlZ2lvbiIsInNldEF0dHJpYnV0ZSIsInN1YnJlZ2lvbiIsInVsQ29tbWVudHMiLCJpZCIsInVybCIsImZldGNoIiwibWV0aG9kIiwianNvbiIsInRoZW4iLCJkYXRhIiwiRXJyb3IiLCJsaXN0IiwiY29tbWVudCIsImNyZWF0aW9uX2RhdGUiLCJ1c2VybmFtZSIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsImdldENvbW1lbnRMaXN0IiwicGFyZW50RWxlbWVudCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIml0ZW1faWQiLCJ0ZXh0IiwiYWRkTGlrZSIsImN1cnJlbnRDb3VudCIsIk51bWJlciIsIm5leHRFbGVtZW50U2libGluZyIsIlN0cmluZyIsImNyZWF0ZU5ld0NvdW50cnlPYmoiLCJjb3VudHJpZXMiLCJsaWtlcyIsImxpa2VzTm8iLCJsaWtlIiwic2xpY2UiLCJnZXRMaWtlcyIsInJlc3BvbnNlMSJdLCJzb3VyY2VSb290IjoiIn0=