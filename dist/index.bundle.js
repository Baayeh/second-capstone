"use strict";(self.webpackChunkwebpack_template=self.webpackChunkwebpack_template||[]).push([[826],{864:()=>{const t="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi",e="14KqRvCZ5CTRdsGLguWF",n=document.querySelector(".country-list");let a=[];const s=()=>{const t=document.querySelector(".list-group"),e=document.querySelector(".commentsCounter");t.children.length>0?e.innerHTML=t.children.length:e.innerHTML="0"},o=async n=>{const a=document.querySelector(".list-group");n&&await(async n=>{const a=`${t}/apps/${e}/comments?item_id=${n}`;return(await fetch(a,{method:"GET"})).json()})(n).then((t=>{if(!(t.length>0))throw Error("No comments");{const e=t.map((t=>`<li class="list-group-item d-flex justify-content-between align-items-center">\n              <span>${t.creation_date}</span>\n              <span>${t.username}</span>\n              <span>${t.comment}</span>\n            </li>`));a.innerHTML=e.join(""),s()}})).catch((t=>{const e=`<li class="list-group-item d-flex justify-content-center">${t.message}</li>`;a.innerHTML=e}))};(()=>{const t=document.createElement("section");t.innerHTML='<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">\n  <div class="modal-dialog modal-dialog-scrollable">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n      </div>\n      <div class="modal-body">\n        <section class="text-center">\n          <img id="country-img" src="" alt="modal image">\n          <section>\n            <h3 id="country-title" class="mt-2"></h3>\n            <p class="card-text mb-2">\n              <span class="p-lead">Population: </span> \n              <span class="modal-population"></span>\n            </p>\n            <p class="card-text mb-2">\n              <span class="p-lead">Official Name: </span> \n              <span class="official"></span>\n            </p>\n          </section>\n        </section>\n        <section class="comment-section">\n          <h4 class="d-flex align-items-center gap-2 justify-content-center"><span class="commentsCounter badge bg-secondary rounded-pill"></span><span>Comments</span></h4>\n          <ul class="list-group mt-4"></ul>\n        </section>\n\n        <section class="mt-5">\n          <form>\n            <input type="text" id="name" class="form-control" placeholder="Your name" aria-label="Full Name">\n            <textarea id="insights" type="text" class="form-control" placeholder="Remarks" aria-label="Remarks"></textarea>\n            <button type="button" id=\'add-comment\' class="btn btn-success">Comment</button>\n          </form>\n        </section>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>',document.querySelector("body").appendChild(t)})();const l=(a,l=[])=>{if(a.length){const c=a.map((t=>{const e=l.find((e=>{if(e.item_id===t.name.common.split(" ")[0])return e}));return{...t,likesCount:e?e.likes:0}}));c.length&&(async a=>{let l="";a.forEach((t=>{const e=t.name.common.split(" ")[0],n=`<div class="col-12 col-sm-6 col-lg-3" data-id=${t.name.common}>\n    <div class="card mx-auto" data-id=${t.name.common}>\n      <div class="card-img" style="background-image: url(${t.flags.svg})"></div>\n      <div class="card-body">\n        <div class="c-header d-flex justify-content-between align-items-center mb-2">\n          <h4 class="card-title mb-0">${t.name.common}</h4>\n          <div class="likes">\n            <a href="javascript:;" type="button" class='add-like' id=${e}>\n              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>\n            </a>\n            <span class="likes-counter">${t.likesCount}</span>\n          </div>\n        </div>\n        <p class="card-text small mb-2">\n          <span class="p-lead">Population: </span>\n          <span class="population">${t.population.toLocaleString("en-US")}</span>\n        </p>\n        <p class="card-text small mb-2">\n          <span class="p-lead">Region: </span> \n          <span class="region">${t.region}</span>\n        </p>\n        <p class="card-text small mb-2">\n          <span class="p-lead">Capital: </span> \n          <span class="capital">${t.capital}</span>\n        </p>\n        <button type="button" class="btn btn-outline-secondary comment-btn" data-bs-toggle="modal" data-bs-target="#exampleModal" id="${t.name.common}">See Details</button>\n      </div>\n    </div>\n  </div>`;l+=n})),n.innerHTML=l,document.querySelector("#country-counter").textContent=n.children.length,document.querySelectorAll(".card").forEach((n=>{n.addEventListener("click",(n=>{if(n.target.classList.contains("comment-btn")){s();const t=n.target.getAttribute("id");document.querySelector(".modal").setAttribute("data-id",t);const e=((t,e)=>e.find((e=>e.name.common===t.trim())))(t,a),l=document.querySelector("#country-img"),c=document.querySelector("#country-title"),i=document.querySelector(".modal-population"),d=document.querySelector(".official");l.setAttribute("src",e.flags.svg),c.innerHTML=e.name.common,i.innerHTML=e.population.toLocaleString("en-US"),d.innerHTML=e.name.official,o(e.name.common)}n.target.parentNode.parentNode.classList.contains("add-like")&&(async n=>(await fetch(`${t}/apps/${e}/likes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:n})})).text())(n.target.parentNode.parentNode.getAttribute("id")).then((()=>{const t=Number(n.target.parentNode.parentNode.nextElementSibling.textContent);n.target.parentNode.parentNode.nextElementSibling.textContent=String(t+1)}))}))}))})(c)}};document.querySelector("#add-comment").addEventListener("click",(()=>{const n=document.getElementById("exampleModal").getAttribute("data-id").trim(),a=document.getElementById("name").value,s=document.getElementById("insights").value;""!==a&&""!==s&&(async n=>(await fetch(`${t}/apps/${e}/comments`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)})).text())({item_id:n,username:a,comment:s}).then((()=>{o(n),document.getElementById("name").value="",document.getElementById("insights").value=""}))})),document.addEventListener("DOMContentLoaded",(async()=>{await(async()=>(await fetch("https://restcountries.com/v3.1/all")).json())().then((n=>(a=n.slice(0,8),(async()=>await fetch(`${t}/apps/${e}/likes`))()))).then((t=>{t.json().then((t=>{l(a,t)})).catch((()=>{l(a,[])}))}))}))}},t=>{t(t.s=864)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNUL0QsV0FDQUYsWUFHdUJMLE1BQUssS0FDMUJULEVBQWUrRSxHQUNmdkYsU0FBU3dGLGVBQWUsUUFBUUMsTUFBUSxHQUN4Q3pGLFNBQVN3RixlQUFlLFlBQVlDLE1BQVEsRUFBRSxHQUVsRCxJQXdCSnpGLFNBQVMyRCxpQkFBaUIsb0JBbEJBbEQsZUhyT0xBLGlCQUNJSSxNQUFNLHVDQUNiRSxPR29PVixHQUNIRSxNQUFNQyxJQUNMLEVBQVlBLEVBQUt5RSxNQUFNLEVBQUcsR0l6T2ZsRixnQkFDUUksTUFBTSxHQUFHZixVQUFzQkMsV0p5TzNDNkYsTUFFUjNFLE1BQU00RSxJQUNMQSxFQUNHOUUsT0FDQUUsTUFBTUMsSUFDTGUsRUFBb0IsRUFBV2YsRUFBSyxJQUVyQ1EsT0FBTSxLQUNMTyxFQUFvQixFQUFXLEdBQUcsR0FDbEMsR0FDSixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9tb2R1bGVzL2NvdW50cmllcy5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvSW52b2x2ZW1lbnQuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9tb2R1bGVzL0RPTUVsZW1lbnRzLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9tb2R1bGVzL2NvbW1lbnRzQ291bnRlci5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvY29tbWVudHMuanMiLCJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9tb2R1bGVzL0l0ZW1zQ291bnRlci5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL21vZHVsZXMvbGlrZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ291bnRyaWVzIEFQSVxuY29uc3QgQkFTRV9VUkwgPSAnaHR0cHM6Ly9yZXN0Y291bnRyaWVzLmNvbS92My4xJztcblxuLy8gR2V0IGxpc3Qgb2YgY291bnRyaWVzXG5jb25zdCBnZXRDb3VudHJpZXMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9L2FsbGApO1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0Q291bnRyaWVzO1xuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9wZXJhdG9yLWxpbmVicmVha1xuY29uc3QgSU5WVk9MVkVEX1VSTCA9XG4gICdodHRwczovL3VzLWNlbnRyYWwxLWludm9sdmVtZW50LWFwaS5jbG91ZGZ1bmN0aW9ucy5uZXQvY2Fwc3RvbmVBcGknO1xuXG5jb25zdCBBUFBfSUQgPSAnMTRLcVJ2Q1o1Q1RSZHNHTGd1V0YnO1xuXG5leHBvcnQgeyBJTlZWT0xWRURfVVJMLCBBUFBfSUQgfTsiLCJjb25zdCBjb3VudHJ5TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb3VudHJ5LWxpc3QnKTtcblxuZXhwb3J0IGRlZmF1bHQgY291bnRyeUxpc3Q7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBpbXBsaWNpdC1hcnJvdy1saW5lYnJlYWsgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBhcnJheS1jYWxsYmFjay1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuLyogZXNsaW50LWRpc2FibGUgY29tbWEtZGFuZ2xlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBhcnJvdy1ib2R5LXN0eWxlICovXG5pbXBvcnQgZ2V0Q291bnRyaWVzIGZyb20gJy4vbW9kdWxlcy9jb3VudHJpZXMuanMnO1xuaW1wb3J0IHsgc2hvd0NvbW1lbnRzLCBhZGRDb21tZW50IH0gZnJvbSAnLi9tb2R1bGVzL2NvbW1lbnRzLmpzJztcbmltcG9ydCB7IGdldExpa2VzLCBhZGRMaWtlIH0gZnJvbSAnLi9tb2R1bGVzL2xpa2VzLmpzJztcbmltcG9ydCBOdW1iZXJPZkNvbW1lbnRzIGZyb20gJy4vbW9kdWxlcy9jb21tZW50c0NvdW50ZXIuanMnO1xuaW1wb3J0IGNvdW50cnlDb3VudCBmcm9tICcuL21vZHVsZXMvSXRlbXNDb3VudGVyLmpzJztcbmltcG9ydCBjb3VudHJ5TGlzdCBmcm9tICcuL21vZHVsZXMvRE9NRWxlbWVudHMuanMnO1xuXG5sZXQgY291bnRyaWVzID0gW107XG5cbi8vIEdldCB0aGUgc3BlY2lmaWMgY291bnRyeVxuY29uc3QgZmlsdGVyQ291bnRyaWVzID0gKGNvdW50cnlOYW1lLCBjb3VudHJ5QXJyKSA9PlxuICBjb3VudHJ5QXJyLmZpbmQoKGl0ZW0pID0+IGl0ZW0ubmFtZS5jb21tb24gPT09IGNvdW50cnlOYW1lLnRyaW0oKSk7XG5cbi8vIEdldHRpbmcgdGhlIG51bWJlciBvZiBjb21tZW50c1xuY29uc3QgZ2V0TnVtT2ZDb21tZW50cyA9ICgpID0+IHtcbiAgY29uc3QgQ29tbWVudHNDb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtZ3JvdXAnKTtcbiAgY29uc3QgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21tZW50c0NvdW50ZXInKTtcbiAgaWYgKENvbW1lbnRzQ291bnRlci5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgY291bnRlci5pbm5lckhUTUwgPSBOdW1iZXJPZkNvbW1lbnRzKENvbW1lbnRzQ291bnRlci5jaGlsZHJlbik7XG4gIH0gZWxzZSB7XG4gICAgY291bnRlci5pbm5lckhUTUwgPSAnMCc7XG4gIH1cbn07XG5cbmNvbnN0IGdldENvbW1lbnRMaXN0ID0gYXN5bmMgKGlkKSA9PiB7XG4gIGNvbnN0IHVsQ29tbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1ncm91cCcpO1xuICBpZiAoaWQpIHtcbiAgICBhd2FpdCBzaG93Q29tbWVudHMoaWQpXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgbGlzdCA9IGRhdGEubWFwKChjb21tZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxzcGFuPiR7Y29tbWVudC5jcmVhdGlvbl9kYXRlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4+JHtjb21tZW50LnVzZXJuYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4+JHtjb21tZW50LmNvbW1lbnR9PC9zcGFuPlxuICAgICAgICAgICAgPC9saT5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHVsQ29tbWVudHMuaW5uZXJIVE1MID0gbGlzdC5qb2luKCcnKTtcbiAgICAgICAgICBnZXROdW1PZkNvbW1lbnRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoJ05vIGNvbW1lbnRzJyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zdCBsaXN0ID0gYDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlclwiPiR7ZXJyLm1lc3NhZ2V9PC9saT5gO1xuICAgICAgICB1bENvbW1lbnRzLmlubmVySFRNTCA9IGxpc3Q7XG4gICAgICB9KTtcbiAgfVxufTtcblxuLy8gRGlzcGxheSB0aGUgbGlzdCBvZiBjb3VudHJpZXNcbmNvbnN0IGRpc3BsYXlDb3VudHJpZXMgPSBhc3luYyAobmV3TGlzdCkgPT4ge1xuICBsZXQgYWxsQ291bnRyaWVzID0gJyc7XG4gIG5ld0xpc3QuZm9yRWFjaCgoY291bnRyeSkgPT4ge1xuICAgIGNvbnN0IGNvdW50cnlJZCA9IGNvdW50cnkubmFtZS5jb21tb24uc3BsaXQoJyAnKVswXTtcbiAgICBjb25zdCBodG1sID0gYDxkaXYgY2xhc3M9XCJjb2wtMTIgY29sLXNtLTYgY29sLWxnLTNcIiBkYXRhLWlkPSR7XG4gICAgICBjb3VudHJ5Lm5hbWUuY29tbW9uXG4gICAgfT5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZCBteC1hdXRvXCIgZGF0YS1pZD0ke2NvdW50cnkubmFtZS5jb21tb259PlxuICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaW1nXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtjb3VudHJ5LmZsYWdzLnN2Z30pXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjLWhlYWRlciBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIG1iLTJcIj5cbiAgICAgICAgICA8aDQgY2xhc3M9XCJjYXJkLXRpdGxlIG1iLTBcIj4ke2NvdW50cnkubmFtZS5jb21tb259PC9oND5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlrZXNcIj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9J2FkZC1saWtlJyBpZD0ke2NvdW50cnlJZH0+XG4gICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTYgaC02XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjJcIiBkPVwiTTQuMzE4IDYuMzE4YTQuNSA0LjUgMCAwMDAgNi4zNjRMMTIgMjAuMzY0bDcuNjgyLTcuNjgyYTQuNSA0LjUgMCAwMC02LjM2NC02LjM2NEwxMiA3LjYzNmwtMS4zMTgtMS4zMThhNC41IDQuNSAwIDAwLTYuMzY0IDB6XCI+PC9wYXRoPjwvc3ZnPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaWtlcy1jb3VudGVyXCI+JHtjb3VudHJ5Lmxpa2VzQ291bnR9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHQgc21hbGwgbWItMlwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicC1sZWFkXCI+UG9wdWxhdGlvbjogPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicG9wdWxhdGlvblwiPiR7Y291bnRyeS5wb3B1bGF0aW9uLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycpfTwvc3Bhbj5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dCBzbWFsbCBtYi0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwLWxlYWRcIj5SZWdpb246IDwvc3Bhbj4gXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZWdpb25cIj4ke2NvdW50cnkucmVnaW9ufTwvc3Bhbj5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dCBzbWFsbCBtYi0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwLWxlYWRcIj5DYXBpdGFsOiA8L3NwYW4+IFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FwaXRhbFwiPiR7Y291bnRyeS5jYXBpdGFsfTwvc3Bhbj5cbiAgICAgICAgPC9wPlxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgY29tbWVudC1idG5cIiBkYXRhLWJzLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS1icy10YXJnZXQ9XCIjZXhhbXBsZU1vZGFsXCIgaWQ9XCIke2NvdW50cnkubmFtZS5jb21tb259XCI+U2VlIERldGFpbHM8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5gO1xuICAgIGFsbENvdW50cmllcyArPSBodG1sO1xuICB9KTtcblxuICBjb3VudHJ5TGlzdC5pbm5lckhUTUwgPSBhbGxDb3VudHJpZXM7XG5cbiAgLy8gQ291bnRyeSBDb3VudGVyXG4gIGNvbnN0IGNvdW50cnlDb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvdW50cnktY291bnRlcicpO1xuICBjb3VudHJ5Q291bnRlci50ZXh0Q29udGVudCA9IGNvdW50cnlDb3VudChjb3VudHJ5TGlzdC5jaGlsZHJlbik7XG5cbiAgY29uc3QgY291bnRyeUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZCcpO1xuICBjb3VudHJ5RWxlbWVudC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAvLyBPcGVuIE1vZGFsIGRpYWxvZ1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY29tbWVudC1idG4nKSkge1xuICAgICAgICBnZXROdW1PZkNvbW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpO1xuICAgICAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBjb3VudHJ5TmFtZSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckNvdW50cmllcyhjb3VudHJ5TmFtZSwgbmV3TGlzdCk7XG4gICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3VudHJ5LWltZycpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3VudHJ5LXRpdGxlJyk7XG4gICAgICAgIGNvbnN0IHBvcHVsYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtcG9wdWxhdGlvbicpO1xuICAgICAgICBjb25zdCBvZmZpY2lhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vZmZpY2lhbCcpO1xuICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCByZXN1bHQuZmxhZ3Muc3ZnKTtcbiAgICAgICAgdGl0bGUuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUuY29tbW9uO1xuICAgICAgICBwb3B1bGF0aW9uLmlubmVySFRNTCA9IHJlc3VsdC5wb3B1bGF0aW9uLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycpO1xuICAgICAgICBvZmZpY2lhbC5pbm5lckhUTUwgPSByZXN1bHQubmFtZS5vZmZpY2lhbDtcblxuICAgICAgICAvLyBkaXNwbGF5aW5nIGNvbW1lbnRzXG4gICAgICAgIGdldENvbW1lbnRMaXN0KHJlc3VsdC5uYW1lLmNvbW1vbik7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBMaWtlIENvdW50ZXJcbiAgICAgIGlmIChlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtbGlrZScpKSB7XG4gICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgYWRkTGlrZShjb3VudHJ5TmFtZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gTnVtYmVyKFxuICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudFxuICAgICAgICAgICk7XG4gICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IFN0cmluZyhcbiAgICAgICAgICAgIGN1cnJlbnRDb3VudCArIDFcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vLyBkaXNwbGF5IG1vZGFsIGRpYWxvZ1xuY29uc3QgbW9kYWxEaWFsb2cgPSAoKSA9PiB7XG4gIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG4gIGNvbnN0IGRpYWxvZyA9IGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiZXhhbXBsZU1vZGFsXCIgdGFiaW5kZXg9XCItMVwiIGFyaWEtbGFiZWxsZWRieT1cImV4YW1wbGVNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgbW9kYWwtZGlhbG9nLXNjcm9sbGFibGVcIj5cbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgIDxzZWN0aW9uIGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8aW1nIGlkPVwiY291bnRyeS1pbWdcIiBzcmM9XCJcIiBhbHQ9XCJtb2RhbCBpbWFnZVwiPlxuICAgICAgICAgIDxzZWN0aW9uPlxuICAgICAgICAgICAgPGgzIGlkPVwiY291bnRyeS10aXRsZVwiIGNsYXNzPVwibXQtMlwiPjwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dCBtYi0yXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicC1sZWFkXCI+UG9wdWxhdGlvbjogPC9zcGFuPiBcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb2RhbC1wb3B1bGF0aW9uXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHQgbWItMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInAtbGVhZFwiPk9mZmljaWFsIE5hbWU6IDwvc3Bhbj4gXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwib2ZmaWNpYWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgIDxzZWN0aW9uIGNsYXNzPVwiY29tbWVudC1zZWN0aW9uXCI+XG4gICAgICAgICAgPGg0IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBnYXAtMiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+PHNwYW4gY2xhc3M9XCJjb21tZW50c0NvdW50ZXIgYmFkZ2UgYmctc2Vjb25kYXJ5IHJvdW5kZWQtcGlsbFwiPjwvc3Bhbj48c3Bhbj5Db21tZW50czwvc3Bhbj48L2g0PlxuICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3QtZ3JvdXAgbXQtNFwiPjwvdWw+XG4gICAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgICA8c2VjdGlvbiBjbGFzcz1cIm10LTVcIj5cbiAgICAgICAgICA8Zm9ybT5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmFtZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJZb3VyIG5hbWVcIiBhcmlhLWxhYmVsPVwiRnVsbCBOYW1lXCI+XG4gICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJpbnNpZ2h0c1wiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIlJlbWFya3NcIiBhcmlhLWxhYmVsPVwiUmVtYXJrc1wiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD0nYWRkLWNvbW1lbnQnIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCI+Q29tbWVudDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5gO1xuICBzZWN0aW9uLmlubmVySFRNTCA9IGRpYWxvZztcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHNlY3Rpb24pO1xufTtcblxubW9kYWxEaWFsb2coKTtcblxuLy8gY3JlYXRlIG9iaiBmb3IgZWFjaCBjb3VudHJ5IHRvIGluY2x1ZGUgbGlrZXNDb3VudFxuY29uc3QgY3JlYXRlTmV3Q291bnRyeU9iaiA9IChjb3VudHJpZXMsIGxpa2VzID0gW10pID0+IHtcbiAgaWYgKGNvdW50cmllcy5sZW5ndGgpIHtcbiAgICBjb25zdCBuZXdMaXN0ID0gY291bnRyaWVzLm1hcCgoY291bnRyeSkgPT4ge1xuICAgICAgY29uc3QgbGlrZXNObyA9IGxpa2VzLmZpbmQoKGxpa2UpID0+IHtcbiAgICAgICAgaWYgKGxpa2UuaXRlbV9pZCA9PT0gY291bnRyeS5uYW1lLmNvbW1vbi5zcGxpdCgnICcpWzBdKSB7XG4gICAgICAgICAgcmV0dXJuIGxpa2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY291bnRyeSxcbiAgICAgICAgbGlrZXNDb3VudDogbGlrZXNObyA/IGxpa2VzTm8ubGlrZXMgOiAwLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIG5ld0xpc3QubGVuZ3RoICYmIGRpc3BsYXlDb3VudHJpZXMobmV3TGlzdCk7XG4gIH1cbn07XG5cbi8vIGFkZCBjb21tZW50XG5jb25zdCBjcmVhdGVDb21tZW50ID0gKCkgPT4ge1xuICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWNvbW1lbnQnKTtcbiAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVNb2RhbCcpLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgIGNvbnN0IGNvbW1lbnRJRCA9IGlkLnRyaW0oKTtcbiAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJykudmFsdWU7XG4gICAgY29uc3QgY29tbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNpZ2h0cycpLnZhbHVlO1xuICAgIGNvbnN0IGNvbW1lbnRPYmogPSB7XG4gICAgICBpdGVtX2lkOiBjb21tZW50SUQsXG4gICAgICB1c2VybmFtZSxcbiAgICAgIGNvbW1lbnQsXG4gICAgfTtcbiAgICBpZiAodXNlcm5hbWUgIT09ICcnICYmIGNvbW1lbnQgIT09ICcnKSB7XG4gICAgICBhZGRDb21tZW50KGNvbW1lbnRPYmopLnRoZW4oKCkgPT4ge1xuICAgICAgICBnZXRDb21tZW50TGlzdChjb21tZW50SUQpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNpZ2h0cycpLnZhbHVlID0gJyc7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcblxuY3JlYXRlQ29tbWVudCgpO1xuXG5jb25zdCBmZXRjaEFsbENvdW50cmllcyA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgZ2V0Q291bnRyaWVzKClcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY291bnRyaWVzID0gZGF0YS5zbGljZSgwLCA4KTtcbiAgICAgIHJldHVybiBnZXRMaWtlcygpO1xuICAgIH0pXG4gICAgLnRoZW4oKHJlc3BvbnNlMSkgPT4ge1xuICAgICAgcmVzcG9uc2UxXG4gICAgICAgIC5qc29uKClcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICBjcmVhdGVOZXdDb3VudHJ5T2JqKGNvdW50cmllcywgZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlTmV3Q291bnRyeU9iaihjb3VudHJpZXMsIFtdKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZmV0Y2hBbGxDb3VudHJpZXMpO1xuIiwiY29uc3QgTnVtYmVyT2ZDb21tZW50cyA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IGNvdW50ZXIgPSBpdGVtLmxlbmd0aDtcbiAgcmV0dXJuIGNvdW50ZXI7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJPZkNvbW1lbnRzO1xuIiwiaW1wb3J0IHsgSU5WVk9MVkVEX1VSTCwgQVBQX0lEIH0gZnJvbSAnLi9JbnZvbHZlbWVudC5qcyc7XG5cbmNvbnN0IHNob3dDb21tZW50cyA9IGFzeW5jIChpZCkgPT4ge1xuICBjb25zdCB1cmwgPSBgJHtJTlZWT0xWRURfVVJMfS9hcHBzLyR7QVBQX0lEfS9jb21tZW50cz9pdGVtX2lkPSR7aWR9YDtcbiAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcgfTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcXVlc3RPcHRpb25zKTtcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn07XG5cbmNvbnN0IGFkZENvbW1lbnQgPSBhc3luYyAoZGF0YSkgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0lOVlZPTFZFRF9VUkx9L2FwcHMvJHtBUFBfSUR9L2NvbW1lbnRzYCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICB9KTtcbiAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbn07XG5cbmV4cG9ydCB7IHNob3dDb21tZW50cywgYWRkQ29tbWVudCB9O1xuIiwiY29uc3QgbnVtT2ZDb3VudHJpZXMgPSAoaXRlbXMpID0+IHtcbiAgY29uc3QgY291bnQgPSBpdGVtcy5sZW5ndGg7XG4gIHJldHVybiBjb3VudDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG51bU9mQ291bnRyaWVzO1xuIiwiaW1wb3J0IHsgSU5WVk9MVkVEX1VSTCwgQVBQX0lEIH0gZnJvbSAnLi9JbnZvbHZlbWVudC5qcyc7XG5cbi8vIEdldCBhbGwgTGlrZXMgLS0tLS0+ICAvYXBwcy86YXBwX2lkL2xpa2VzL1xuY29uc3QgZ2V0TGlrZXMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7SU5WVk9MVkVEX1VSTH0vYXBwcy8ke0FQUF9JRH0vbGlrZXNgKTtcbiAgcmV0dXJuIHJlc3BvbnNlO1xufTtcblxuLy8gYWRkIGxpa2UgIC0tLS0tLS0+IC9hcHBzLzphcHBfaWQvbGlrZXMvXG5jb25zdCBhZGRMaWtlID0gYXN5bmMgKGlkKSA9PiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7SU5WVk9MVkVEX1VSTH0vYXBwcy8ke0FQUF9JRH0vbGlrZXNgLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgaXRlbV9pZDogaWQsXG4gICAgfSksXG4gIH0pO1xuICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xufTtcblxuZXhwb3J0IHsgZ2V0TGlrZXMsIGFkZExpa2UgfTtcbiJdLCJuYW1lcyI6WyJJTlZWT0xWRURfVVJMIiwiQVBQX0lEIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0TnVtT2ZDb21tZW50cyIsIkNvbW1lbnRzQ291bnRlciIsImNvdW50ZXIiLCJjaGlsZHJlbiIsImxlbmd0aCIsImlubmVySFRNTCIsImdldENvbW1lbnRMaXN0IiwiYXN5bmMiLCJpZCIsInVsQ29tbWVudHMiLCJ1cmwiLCJmZXRjaCIsIm1ldGhvZCIsImpzb24iLCJzaG93Q29tbWVudHMiLCJ0aGVuIiwiZGF0YSIsIkVycm9yIiwibGlzdCIsIm1hcCIsImNvbW1lbnQiLCJjcmVhdGlvbl9kYXRlIiwidXNlcm5hbWUiLCJqb2luIiwiY2F0Y2giLCJlcnIiLCJtZXNzYWdlIiwic2VjdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsIm1vZGFsRGlhbG9nIiwiY3JlYXRlTmV3Q291bnRyeU9iaiIsImNvdW50cmllcyIsImxpa2VzIiwibmV3TGlzdCIsImNvdW50cnkiLCJsaWtlc05vIiwiZmluZCIsImxpa2UiLCJpdGVtX2lkIiwibmFtZSIsImNvbW1vbiIsInNwbGl0IiwibGlrZXNDb3VudCIsImFsbENvdW50cmllcyIsImZvckVhY2giLCJjb3VudHJ5SWQiLCJodG1sIiwiZmxhZ3MiLCJzdmciLCJwb3B1bGF0aW9uIiwidG9Mb2NhbGVTdHJpbmciLCJyZWdpb24iLCJjYXBpdGFsIiwidGV4dENvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjb3VudHJ5TmFtZSIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJlc3VsdCIsImNvdW50cnlBcnIiLCJpdGVtIiwidHJpbSIsImZpbHRlckNvdW50cmllcyIsImltZyIsInRpdGxlIiwib2ZmaWNpYWwiLCJwYXJlbnROb2RlIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGV4dCIsImFkZExpa2UiLCJjdXJyZW50Q291bnQiLCJOdW1iZXIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJTdHJpbmciLCJkaXNwbGF5Q291bnRyaWVzIiwiY29tbWVudElEIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImFkZENvbW1lbnQiLCJzbGljZSIsImdldExpa2VzIiwicmVzcG9uc2UxIl0sInNvdXJjZVJvb3QiOiIifQ==